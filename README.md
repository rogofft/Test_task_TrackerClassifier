### Описание

Автоматический критерий, определяющий применимость
к каждому из пользователей паттерна перемещения 
"работа-дом". Критерий находит тех, кто долгое время 
в ночные часы находится в районе одной точки ("дом") 
и достаточно долгое время в дневные часы находится в 
заметно отличающейся точке ("работа").

Дневные перемещения пользователей находятся в файле 
*sample.csv.tar.bz2*. Колонки в файле имеют следующий 
смысл: id пользователя, время его прибытия в очередную 
точку, долгота точки, широта точки.

Считается, что пользователь находится в окрестности некоторой 
точки все время, вплоть до прибытия в следующую точку.

### Применение

Для запуска скрипта необходимо:
* распаковать *sample.csv.tar.bz2* в текущую директорию
* создать виртуальное окружение командой `python -m virtualenv venv` и активировать его `venv/Scripts/activate`
* установить используемые библиотеки Python с помощью 
  команды `python -m pip install -r "requirements.txt"`
* запустить `jupyter notebook` и в нём запустить скрипт `TrackClassifier.ipynb`

Результатом работы скрипта будет файл *results.csv*, 
в котором первый столбец обозначает id пользователя, второй - 
применимость паттерна "работа-дом" (0 - не применим, 1 - применим).

### Описание работы критерия

Для извлечения данных пользователя из файла *event_sample.csv* использована библиотека 
pandas. Для удобства, строковый формат даты и времени, с помощью функции 
pandas.to_datetime, переводится в формат datetime библиотеки python.

Так как данные довольно сильно зашумлены и присутствуют пропуски по времени, 
все координаты в пределах одного часа усредняются.

Далее усреднённые координаты пользователя разбиваются на 3 интервала, в 
зависимости от времени:
* 0...8 ч - интервал, в котором пользователь предположительно находится "дома"
* 11...17 ч - интервал "на работе"
* 20...23 ч - интервал "после работы"

Некоторые часы не входят в интервалы. Предположительно, в этот момент 
пользователь должен находиться в пути.

В каждом интервале времени производится кластеризация алгоритмом AgglomerativeClustering 
из библиотеки scikit-learn. Далее из полученных кластеров убираются те, 
в которых только один элемент (скорее всего в этот момент пользователь в пути).

Финальным правилом для критерия применимости паттерна выбраны условия:
* в каждом из трёх интервалов времени должен быть только один кластер 
  (что соответствует пребыванию пользователя долгое время в одной точке)
* координаты центров кластеров "дома" и "на работе" должны заметно отличаться
* координаты центров кластеров "дома" и "после работы" не должны сильно отличаться 
  (пользователь не должен быть где-то ещё после работы)